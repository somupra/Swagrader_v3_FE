<mat-sidenav-container>
  <mat-sidenav mode="side" opened class="dashboardnav">
    <div style="overflow-y: hidden">
      <mat-icon class="extrastyle">home</mat-icon>
      <mat-icon class="extrastyle">today</mat-icon>
      <mat-icon class="extrastyle">school</mat-icon>
      <mat-icon class="extrastyle" style="cursor: pointer;" [routerLink]="['roster-settings']">settings</mat-icon>
      <mat-icon class="extrastyle">info</mat-icon>
    </div>

    <mat-icon style="position: fixed; bottom: 0;">person</mat-icon>

  </mat-sidenav>
  <mat-sidenav-content>
    <div class="mat-display-2" style="margin: 15px; justify-content: space-between;">
      <div>{{courseDetail.course_number}}: {{courseDetail.course_title}}</div>
      <div class="mat-title"> ({{courseDetail.term}} {{courseDetail.year}})</div>
    </div>

    <mat-divider></mat-divider>
    <div class="row" style="margin: 5px; margin-bottom: 0px">

      <div class="col mat-typography " style="margin: 5px">
        <div class="row">
          <div class="col"
            style="border-style: dotted; border-color:rgb(0, 53, 139); border-radius: 10px; margin: 20px; padding-top: 7px">
            <h2>Course Description</h2>
            <hr>
            <div style="text-align: justify">
              <div style="padding: 1px">
                <h3> Instructor: {{courseDetail.instructor}}</h3>
                {{courseDetail.course_description}}
                Click <a href="#">here</a> for more details and Course Policies.
                <br><br><br><br>
              </div>
            </div>

          </div>
        </div>
      </div>

      <div class="col mat-typography"
        style="border-style: dotted; border-color:rgb(0, 53, 139); border-radius: 10px; margin: 20px;margin-top: 25px; padding-top: 7px; padding-left: 30px">

        <h2>Course Statistics</h2>
        <hr>

        <div class="row">
          <div class="col-md-7">
            <div class="row">
              <div class="col">
                <div>Assignments: <div class="mat-display-2" style="margin-top: 3px; padding-bottom: 1px">
                    {{dataSource.length}}</div>
                </div>
              </div>
              <div class="col">
                <div>Students: <div class="mat-display-2" style="margin-top: 3px; padding-bottom: 1px">
                    {{courseDetail.st_count}}</div>
                </div>
              </div>
              <div class="col">
                <div>TAs: <div class="mat-display-2" style="margin-top: 3px; padding-bottom: 1px">
                    {{courseDetail.ta_count}}</div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-5">
            <div>Average: <div class="mat-display-2" style="margin-top: 3px; padding-bottom: 1px">
                {{courseDetail.course_avg}}</div>
            </div>

          </div>
        </div>


        <br>
      </div>
    </div>
    <div style="margin-left:30px; margin-right:30px">
      <cdk-virtual-scroll-viewport tvsItemSize class="wrapper mat-elevation-z2">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

          <ng-container matColumnDef="sno">
            <th mat-header-cell *matHeaderCellDef style="background: rgb(0, 53, 139); color: white; width: 30px ">
              <h6>S.No.</h6>
            </th>
            <td mat-cell *matCellDef="let assignment; let i=index"> {{i+1}} </td>
          </ng-container>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef style="background: rgb(0, 53, 139); color: white; width: 200px">
              <h6>Assignment</h6>
            </th>
            <td (click) ="onClickAssignment(assignment)" mat-cell *matCellDef="let assignment" style="cursor: pointer;"> {{assignment.title}} </td>
          </ng-container>

          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef style="background: rgb(0, 53, 139); color: white; width: 90px">
              <h6>Status</h6>
            </th>
            <td mat-cell *matCellDef="let assignment" style="padding-right: 30px">

              <ng-container>{{assignment.status}}</ng-container>
            </td>
          </ng-container>

          <ng-container matColumnDef="gradingMode">
            <th mat-header-cell *matHeaderCellDef style="background: rgb(0, 53, 139); color: white; width: 150px">
              <h6>Grading Mode</h6>
            </th>
            <td mat-cell *matCellDef="let assignment"><span *ngIf="assignment.peergrading===false">Default</span>
              <span *ngIf="assignment.peergrading===true">Peergrading</span> </td>
          </ng-container>

          <ng-container matColumnDef="regradingRequests">
            <th mat-header-cell *matHeaderCellDef style="background: rgb(0, 53, 139); color: white; width: 150px">
              <h6>Regrading Requests</h6>
            </th>
            <td mat-cell *matCellDef="let assignment"> {{assignment.regradingRequests}} </td>
          </ng-container>

          <ng-container matColumnDef="progress">
            <th mat-header-cell *matHeaderCellDef style="background: rgb(0, 53, 139); color: white; width: 200px">
              <h6>Progress</h6>
            </th>
            <td mat-cell *matCellDef="let assignment">
              <mat-progress-bar
                *ngIf="assignment.under_mapping === 2  || assignment.under_grading ===2  || assignment.under_regrading ===1"
                mode="determinate" value={{assignment.progress}}></mat-progress-bar>
              <span *ngIf="assignment.under_config===1 ">Under configuration</span>
              <span *ngIf="assignment.under_mapping=== 1">Bulk submissions to be uploaded.</span>
              <span *ngIf="assignment.graded===1">Completed</span>
              <span *ngIf="assignment.under_grading===1">Grading not started yet.</span>

            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </cdk-virtual-scroll-viewport>
    </div>

    <div class="footer">
      <button (click)="createAssign()" mat-button
        style="margin-right: 20px; color: white; background-color: rgb(0, 16, 161) ">
        Create Assignment <mat-icon style="margin-bottom: 0px; margin-left: 4px">add</mat-icon>
      </button>
      <button [routerLink]="['course-settings']" mat-button
        style="margin-right: 20px; color: white; background-color: rgb(0, 16, 161) ">
        Course Settings <mat-icon style="margin-bottom: 0px; margin-left: 4px">settings</mat-icon>
      </button>
      <button mat-button style="margin-right: 20px; color: white; background-color: rgb(0, 16, 161) ">
        Download grades <mat-icon style="margin-bottom: 0px; margin-left: 4px">save_alt</mat-icon>
      </button>
    </div>
  </mat-sidenav-content>


</mat-sidenav-container>